@model IEnumerable<JobPortal.Areas.Shared.Models.job_application>

@{
    Layout = "_LayoutDashboard";
    ViewData["Title"] = "Applications";
}

<link rel="stylesheet" href="~/css/dashboard.css" />

<section class="my-applications-section">
    <h1 class="page-title">My Applications</h1>

    <div class="applications-table-container">
        <table class="applications-table">
            <thead>
                <tr>
                    <th>Job Title</th>
                    <th>Company</th>
                    <th>Location</th>
                    <th>Industry</th>
                    <th>Salary Range</th>
                    <th>Last Updated</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                @if (!Model.Any())
                {
                    <tr><td colspan="7" class="text-center">You havenâ€™t applied to any jobs yet.</td></tr>
                }
                else
                {
                    foreach (var app in Model)
                    {
                        var job = app.job_listing;
                        var company = job?.company;

                        <tr>
                            <td>@job?.job_title</td>
                            <td>@company?.company_name</td>
                            <td>@company?.company_location</td>
                            <td>@company?.company_industry</td>
                            <td>
                                @if (job?.salary_min != null && job?.salary_max != null)
                                {
                                    @:RM @job.salary_min - RM @job.salary_max
                                }
                                else
                                {
                                    @:Not specified
                                }
                            </td>
                            <td>@app.date_updated.ToString("yyyy-MM-dd")</td>
                            <td>
                                <span class="status status-@app.application_status.ToLower().Replace(" ", "")">
                                    @app.application_status
                                </span>
                            </td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>

    <div class="pagination">
        <span>Showing @Model.Count() applications</span>
    </div>
</section>
