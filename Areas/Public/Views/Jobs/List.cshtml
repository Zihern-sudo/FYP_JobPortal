@model IEnumerable<JobPortal.Areas.Public.Models.JobListItemVm>
@{
    ViewData["Title"] = "Job List";
    var active = (string?)ViewData["ActiveType"] ?? "All";
    var q = (string?)ViewData["Q"] ?? "";
    var loc = (string?)ViewData["Location"] ?? "";

    Func<string, string> isActive = t =>
        string.Equals(active, t, StringComparison.OrdinalIgnoreCase) ? "active" : "";
}

<!-- Header / breadcrumb (keep your existing header styles if any) -->
<div class="container-fluid py-5 bg-dark page-header mb-5">
    <div class="container my-5 pt-5 pb-4">
        <h1 class="display-3 text-white mb-3">Job List</h1>
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb text-uppercase">
                <li class="breadcrumb-item">
                    <a asp-area="Public" asp-controller="Home" asp-action="Index">Home</a>
                </li>
                <li class="breadcrumb-item"><a href="#">Pages</a></li>
                <li class="breadcrumb-item text-white active" aria-current="page">Job List</li>
            </ol>
        </nav>
    </div>
</div>

<div class="container-fluid py-5">
    <div class="container">

        <!-- Search bar (GET) -->
        <form asp-area="Public" asp-controller="Jobs" asp-action="List" method="get" class="row g-2 mb-4">
            <div class="col-md-5">
                <input type="text" name="q" value="@q" class="form-control" placeholder="Keyword (e.g., .NET Developer)" />
            </div>
            <div class="col-md-5">
                <input type="text" name="location" value="@loc" class="form-control" placeholder="Location (e.g., Kuala Lumpur)" />
            </div>
            @* preserve current type when searching *@
            @if (!string.Equals(active, "All", StringComparison.OrdinalIgnoreCase))
            {
                <input type="hidden" name="type" value="@active" />
            }
            <div class="col-md-2">
                <button class="btn btn-primary w-100">Search</button>
            </div>
        </form>

        <!-- Category tabs -->
        <ul class="nav nav-pills d-inline-flex justify-content-center border-bottom mb-5">
            <li class="nav-item">
                <a class="d-flex align-items-center text-start mx-3 ms-0 pb-3 @isActive("All")"
                   asp-area="Public" asp-controller="Jobs" asp-action="List"
                   asp-route-q="@q" asp-route-location="@loc">
                    <h6 class="mt-n1 mb-0">Featured</h6>
                </a>
            </li>
            <li class="nav-item">
                <a class="d-flex align-items-center text-start mx-3 pb-3 @isActive("Full Time")"
                   asp-area="Public" asp-controller="Jobs" asp-action="List"
                   asp-route-type="Full Time" asp-route-q="@q" asp-route-location="@loc">
                    <h6 class="mt-n1 mb-0">Full Time</h6>
                </a>
            </li>
            <li class="nav-item">
                <a class="d-flex align-items-center text-start mx-3 pb-3 @isActive("Part Time")"
                   asp-area="Public" asp-controller="Jobs" asp-action="List"
                   asp-route-type="Part Time" asp-route-q="@q" asp-route-location="@loc">
                    <h6 class="mt-n1 mb-0">Part Time</h6>
                </a>
            </li>
            <li class="nav-item">
                <a class="d-flex align-items-center text-start mx-3 pb-3 @isActive("Contract")"
                   asp-area="Public" asp-controller="Jobs" asp-action="List"
                   asp-route-type="Contract" asp-route-q="@q" asp-route-location="@loc">
                    <h6 class="mt-n1 mb-0">Contract</h6>
                </a>
            </li>
            <li class="nav-item">
                <a class="d-flex align-items-center text-start mx-3 pb-3 @isActive("Freelance")"
                   asp-area="Public" asp-controller="Jobs" asp-action="List"
                   asp-route-type="Freelance" asp-route-q="@q" asp-route-location="@loc">
                    <h6 class="mt-n1 mb-0">Freelance</h6>
                </a>
            </li>
            <li class="nav-item">
                <a class="d-flex align-items-center text-start mx-3 me-0 pb-3 @isActive("Internship")"
                   asp-area="Public" asp-controller="Jobs" asp-action="List"
                   asp-route-type="Internship" asp-route-q="@q" asp-route-location="@loc">
                    <h6 class="mt-n1 mb-0">Internship</h6>
                </a>
            </li>
        </ul>

        <!-- Results -->
        <div>
            @if (Model == null || !Model.Any())
            {
                <div class="alert alert-light border">
                    No jobs found. Try a different keyword or location.
                </div>
            }
            else
            {
                foreach (var job in Model)
                {
                    <div class="job-item p-4 mb-4">
                        <div class="row g-4">
                            <div class="col-sm-12 col-md-8 d-flex align-items-center">
                                <img class="flex-shrink-0 img-fluid border rounded" src="~/img/com-logo-1.jpg" alt="" style="width:80px;height:80px;">
                                <div class="text-start ps-4">
                                    <h5 class="mb-3">@job.Title</h5>
                                    <span class="text-truncate me-3">
                                        <i class="fa fa-map-marker-alt text-primary me-2"></i>@job.Location
                                    </span>
                                    <span class="text-truncate me-3">
                                        <i class="far fa-clock text-primary me-2"></i>@job.EmploymentType
                                    </span>
                                    @if (!string.IsNullOrWhiteSpace(job.SalaryRange))
                                    {
                                        <span class="text-truncate me-0">
                                            <i class="far fa-money-bill-alt text-primary me-2"></i>@job.SalaryRange
                                        </span>
                                    }
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-4 d-flex flex-column align-items-start align-items-md-end justify-content-center">
                                <div class="d-flex mb-3">
                                    
                                    <a class="btn btn-primary"
                                       asp-area="JobSeeker" asp-controller="Account" asp-action="Login">
                                        Log In for more details
                                    </a>
                                </div>
                                <small class="text-truncate">
                                    <i class="far fa-calendar-alt text-primary me-2"></i>@job.Deadline.ToString("dd MMM, yyyy")
                                </small>
                            </div>
                        </div>
                    </div>
                }
            }
        </div>

        <!-- (Optional) paging button kept for parity -->
        <a class="btn btn-primary py-3 px-5" asp-area="Public" asp-controller="Jobs" asp-action="List"
           asp-route-type="@active" asp-route-q="@q" asp-route-location="@loc" asp-route-page="2">
            Browse More Jobs
        </a>
    </div>
</div>
