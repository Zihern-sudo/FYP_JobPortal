@{
  var messages = ViewBag.Messages as List<ConversationMessage>;
  var id = (int)ViewBag.Id;
}
<div class="card shadow-sm">
  <div class="card-header bg-white d-flex justify-content-between align-items-center">
    <div class="fw-semibold">Thread #@id</div>
    <div class="d-flex align-items-center gap-2">
      <button class="btn btn-sm btn-outline-secondary" disabled data-bs-toggle="tooltip"
        data-bs-title="Admin-only action (disabled in prototype)">
        Mark reviewed
      </button>
      <button class="btn btn-sm btn-outline-primary" disabled data-bs-toggle="tooltip"
        data-bs-title="Export disabled in prototype">
        Export
      </button>
    </div>
  </div>

  <div class="card-body">
    @foreach (var m in messages!)
    {
      <div class="mb-3">
        <div class="small text-muted">@m.At â€¢ <span class="fw-semibold">@m.From</span></div>
        <div>@m.Text</div>
        @if (m.IsFlagged)
        {
          <div class="badge text-bg-warning mt-1">Flagged</div>
        }
      </div>
      <hr />
    }
    <div class="text-muted small">Read-only in admin monitor.</div>
  </div>
</div>

@section Scripts{
<script>
  const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
  tooltipTriggerList.map(el => new bootstrap.Tooltip(el));
</script>
}
