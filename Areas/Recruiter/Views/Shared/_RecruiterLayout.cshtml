@* File: Areas/Recruiter/Views/Shared/_RecruiterLayout.cshtml *@
@{
  Layout = null;
  var title = (string?)ViewData["Title"] ?? "Recruiter";

  // Route context for active highlighting
  var ctrl = (string?)ViewContext.RouteData.Values["controller"] ?? "";
  bool isHome = ctrl.Equals("Home", StringComparison.OrdinalIgnoreCase);
  bool isJobs = ctrl.Equals("Jobs", StringComparison.OrdinalIgnoreCase);
  bool isInbox = ctrl.Equals("Inbox", StringComparison.OrdinalIgnoreCase);
  bool isScreen = ctrl.Equals("Screening", StringComparison.OrdinalIgnoreCase)
  || ctrl.Equals("ScreeningQueue", StringComparison.OrdinalIgnoreCase);
  bool isMsgTpl = ctrl.Equals("Templates", StringComparison.OrdinalIgnoreCase);
  bool isJobTpl = ctrl.Equals("JobPostTemplates", StringComparison.OrdinalIgnoreCase);
  bool expandT = isMsgTpl || isJobTpl;
}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>@title - Recruiter</title>

  @* IMPORTANT: use the default ASP.NET path for Bootstrap *@
  <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" asp-append-version="true" />
  <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
  <link rel="stylesheet" href="~/css/recruiter.css" asp-append-version="true" />

  @* Optional CDN fallback if lib files are missing (keeps UI styled) *@
  <script>
    (function () {
      function loaded(href) {
        return Array.from(document.styleSheets).some(s => (s.href || "").indexOf(href) !== -1);
      }
      window.addEventListener('load', function () {
        if (!loaded('/lib/bootstrap/dist/css/bootstrap.min.css')) {
          var l = document.createElement('link');
          l.rel = 'stylesheet';
          l.href = 'https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css';
          document.head.appendChild(l);
        }
      });
    })();
  </script>
</head>

<body>
  <header class="navbar navbar-light bg-white border-bottom px-3" style="min-height:64px;">
    <div class="container-fluid">
      <div class="navbar-brand fw-semibold">JobPortal • <span class="text-secondary">Recruiter</span></div>
      <div class="d-flex align-items-center gap-3">
        <span class="text-muted small">@User?.Identity?.Name</span>
      </div>
    </div>
  </header>

  <main class="app">
    <!-- Sidebar -->
    <aside class="sidebar p-3">
      <div class="fw-bold text-uppercase small text-muted mb-2">Navigation</div>

      <div class="list-group nav-templates">
        <a class="list-group-item list-group-item-action @(isHome ? "active" : "")" asp-area="Recruiter"
          asp-controller="Home" asp-action="Index">Home</a>

        <a class="list-group-item list-group-item-action @(isJobs ? "active" : "")" asp-area="Recruiter"
          asp-controller="Jobs" asp-action="Index">Jobs</a>

        <a class="list-group-item list-group-item-action @(isScreen ? "active" : "")" asp-area="Recruiter"
          asp-controller="Screening" asp-action="Queue">Screening Queue</a>

        <a class="list-group-item list-group-item-action @(isInbox ? "active" : "")" asp-area="Recruiter"
          asp-controller="Inbox" asp-action="Index">Inbox</a>

        @* Templates (collapsible) *@
        <a class="list-group-item list-group-item-action d-flex justify-content-between align-items-center parent @(expandT ? "active-parent" : "")"
          data-bs-toggle="collapse" href="#tmplMenu" role="button" aria-expanded="@(expandT.ToString().ToLower())"
          aria-controls="tmplMenu">
          Templates
          <span class="ms-2 small" aria-hidden="true">▾</span>
        </a>
        <div id="tmplMenu" class="collapse @(expandT ? "show" : "")">
          <div class="list-group subnav">
            <a class="list-group-item list-group-item-action @(isMsgTpl ? "active" : "")" asp-area="Recruiter"
              asp-controller="Templates" asp-action="Index">
              Message Templates
            </a>
            <a class="list-group-item list-group-item-action @(isJobTpl ? "active" : "")" asp-area="Recruiter"
              asp-controller="JobPostTemplates" asp-action="Index">
              Job Templates
            </a>
          </div>
        </div>

        <a class="list-group-item list-group-item-action" asp-area="Recruiter" asp-controller="Bulk"
          asp-action="Index">Bulk Tools</a>
      </div>
    </aside>

    <!-- Content -->
    <section class="p-4">
      @RenderBody()
    </section>
  </main>

  @* Bootstrap bundle (Popper included). Use default lib path; fallback to CDN if not present *@
  <script>
    (function () {
      function script(src, cb) {
        var s = document.createElement('script'); s.src = src; s.onload = cb; document.body.appendChild(s);
      }
      // Try local first
      script('/lib/bootstrap/dist/js/bootstrap.bundle.min.js', function () { });
      // Fallback if local is missing
      setTimeout(function () {
        if (typeof bootstrap === 'undefined') {
          script('https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js', function () { });
        }
      }, 300);
    })();
  </script>

  @RenderSection("Scripts", required: false)
</body>

</html>