@using JobPortal.Areas.Recruiter.Models
@{
  var threads = ViewBag.Threads as List<ThreadListItemVM> ?? new();
}
<div class="d-flex justify-content-between align-items-center mb-3">
  <div class="fw-semibold">Inbox</div>
</div>

<div class="card shadow-sm">
  <div class="card-body p-0">
    <table class="table mb-0 align-middle">
      <thead>
        <tr>
          <th>Job</th>
          <th>Participant</th>
          <th>Last message</th>
          <th>When</th>
          <th class="text-end"></th>
        </tr>
      </thead>
      <tbody>
        @if (!threads.Any())
        {
          <tr>
            <td colspan="5" class="text-center text-muted">No conversations yet.</td>
          </tr>
        }
        else
        {
          foreach (var t in threads)
          {
            <tr>
              <td>@t.JobTitle</td>
              <td>@t.Participant</td>
              <td class="text-muted">@t.LastSnippet</td>
              <td class="text-nowrap">@t.LastAt</td>
              <td class="text-end">
                @if (t.UnreadCount > 0)
                {
                  <span class="badge text-bg-primary">@t.UnreadCount</span>
                }
                <a class="btn btn-sm btn-outline-primary" asp-area="Recruiter" asp-controller="Inbox" asp-action="Thread"
                  asp-route-id="@t.Id">
                  Open
                </a>
              </td>
            </tr>
          }
        }
      </tbody>
    </table>
  </div>
</div>